# 🚀 更新日志

## 2024-09-24

### ✨ 新功能
- **统一部署脚本**: 合并所有部署脚本为 `deploy.sh`，支持三种更新模式
- **系统监控面板**: 页面顶部实时显示CPU/GPU/内存状态
- **处理进度监控**: 可以监控视频转录的实时进度和状态
- **GPU监控页面**: 漂亮的GPU状态可视化界面

### 🐛 修复问题
- **视频处理失败**: 修复处理前未创建数据库记录导致的失败问题
- **Whisper模型下载**: 在Docker构建时预下载模型，解决"模型未安装"错误
- **语法错误**: 修复gpu_monitor.py中的f-string语法错误
- **容器重启**: 解决语法错误导致的容器不断重启问题

### 🔧 改进优化
- **并发控制**: 优化队列大小，避免大量视频上传时系统过载
- **日志监控**: 添加详细的emoji日志标识，方便跟踪处理进度
- **热更新**: 支持不重新构建直接替换代码文件的快速更新
- **缓存优化**: 移除构建脚本中的--no-cache参数，提升构建速度

### 🗑️ 废弃文件
以下脚本已整合到 `deploy.sh` 中，可以删除：
- `deploy-gpu.sh` 
- `deploy-full-gpu.sh`
- `rebuild-gpu.sh`
- `fix-whisper-model.sh`
- `update-and-deploy.sh`
- `diagnose-local-videos.sh`

### 📋 使用指南
```bash
# 三种更新方式
./deploy.sh hot      # 热更新（2-3分钟）
./deploy.sh update   # 常规更新（5-10分钟）  
./deploy.sh rebuild  # 完全重构（15-30分钟）
```

---

## 历史版本

### 2024-09-04 - 初始版本
- 基础视频学习管理系统
- 支持本地视频监控
- OpenAI API转录功能